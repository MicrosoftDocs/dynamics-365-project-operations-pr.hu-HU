---
title: Automatikus proforma számla létrehozásának konfigurálása
description: Ez a témakör a proforma számlák automatikus létrehozásának konfigurálását ismerteti.
author: rumant
manager: Annbe
ms.date: 10/13/2020
ms.topic: article
ms.service: dynamics-365-customerservice
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: e146dd510b3795d52d164fc6acf8e5400ba11310
ms.sourcegitcommit: 11a61db54119503e82faec5f99c4273e8d1247e5
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/16/2020
ms.locfileid: "4078001"
---
# <a name="configure-automated-proforma-invoice-creation"></a><span data-ttu-id="f56c2-103">Automatikus proforma számla létrehozásának konfigurálása</span><span class="sxs-lookup"><span data-stu-id="f56c2-103">Configure automated proforma invoice creation</span></span>

<span data-ttu-id="f56c2-104">_**Érvényesség:** Lite telepítés – ajánlattól proforma számlázásig_</span><span class="sxs-lookup"><span data-stu-id="f56c2-104">_**Applies To:** Lite deployment - deal to proforma invoicing_</span></span>

<span data-ttu-id="f56c2-105">Az automatikus számlalétrehozás a Dynamics 365 Project Operations alkalmazásban konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="f56c2-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="f56c2-106">A rendszer egy proforma számlát hoz létre, amely az egyes projektek és szerződéssorok számlázási ütemezése alapján készült.</span><span class="sxs-lookup"><span data-stu-id="f56c2-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="f56c2-107">A számlázási ütemezések a szerződéssorok szintjén konfigurálhatók.</span><span class="sxs-lookup"><span data-stu-id="f56c2-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="f56c2-108">A szerződés minden sora rendelkezhet külön számlázási ütemezéssel, vagy ha a szerződés minden sorában ugyanazt a számlázási ütemezést lehet is lehet használni.</span><span class="sxs-lookup"><span data-stu-id="f56c2-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="f56c2-109">A számla létrehozásakor a rendszer mindig legalább egy számlát hoz létre projektszerződésenként.</span><span class="sxs-lookup"><span data-stu-id="f56c2-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="f56c2-110">Bizonyos esetekben több számla is létrehozható.</span><span class="sxs-lookup"><span data-stu-id="f56c2-110">In some cases, there may be multiple invoices created.</span></span>

<span data-ttu-id="f56c2-111">Ha például a szerződés több ügyfelet tartalmaz, ugyanannyi számla jön létre, mint azoknak az ügyfeleknek a száma, akiknek számlázható tranzakciói vannak a projekt szerződésben.</span><span class="sxs-lookup"><span data-stu-id="f56c2-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="f56c2-112">Ebből a részből megtudhatja, hogyan kerülnek a tranzakciók egy számlára</span><span class="sxs-lookup"><span data-stu-id="f56c2-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="f56c2-113">Időnként minden projektalapú szerződéssor külön számlázási ütemezést határoz meg.</span><span class="sxs-lookup"><span data-stu-id="f56c2-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="f56c2-114">Például az Adatum szerződés megvalósítási szolgáltatásai az alábbi szerződéssorokat tartalmazzák:</span><span class="sxs-lookup"><span data-stu-id="f56c2-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="f56c2-115">Prototípusmunka, amely rögzített árú, két kézzel létrehozott mérföldkővel.</span><span class="sxs-lookup"><span data-stu-id="f56c2-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="f56c2-116">A bevezetési munkák időpontot foglalnak magukban, és kéthetente, hétfőnként lesznek számlázva.</span><span class="sxs-lookup"><span data-stu-id="f56c2-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="f56c2-117">A felmerült költségeket, amelyeket havonta kell kiszámlázni minden hónap első hétfőjén.</span><span class="sxs-lookup"><span data-stu-id="f56c2-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="f56c2-118">A két sorra vonatkozóan meghatározott számlázási ütemezések a következő táblázatban láthatók:</span><span class="sxs-lookup"><span data-stu-id="f56c2-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="f56c2-119">Szerződéssor</span><span class="sxs-lookup"><span data-stu-id="f56c2-119">Contract line</span></span> | <span data-ttu-id="f56c2-120">Számlakészítés dátuma</span><span class="sxs-lookup"><span data-stu-id="f56c2-120">Invoice run date</span></span> | <span data-ttu-id="f56c2-121">Tranzakció határideje</span><span class="sxs-lookup"><span data-stu-id="f56c2-121">Transaction cut-off date</span></span> | <span data-ttu-id="f56c2-122">Mérföldkő dátuma</span><span class="sxs-lookup"><span data-stu-id="f56c2-122">Milestone date</span></span> | <span data-ttu-id="f56c2-123">Mérföldkő összege</span><span class="sxs-lookup"><span data-stu-id="f56c2-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="f56c2-124">Prototípusmunka</span><span class="sxs-lookup"><span data-stu-id="f56c2-124">Prototype work</span></span> | <span data-ttu-id="f56c2-125">Október 5., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-125">October 5, Monday</span></span> | - | <span data-ttu-id="f56c2-126">Október 5., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-126">October 5, Monday</span></span> | <span data-ttu-id="f56c2-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="f56c2-127">5000 USD</span></span> |
| - | <span data-ttu-id="f56c2-128">November 3., kedd</span><span class="sxs-lookup"><span data-stu-id="f56c2-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="f56c2-129">November 3., kedd</span><span class="sxs-lookup"><span data-stu-id="f56c2-129">November 3, Tuesday</span></span> | <span data-ttu-id="f56c2-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="f56c2-130">12,000 USD</span></span> |
| <span data-ttu-id="f56c2-131">Bevezetési munka</span><span class="sxs-lookup"><span data-stu-id="f56c2-131">Implementation work</span></span> | <span data-ttu-id="f56c2-132">Október 5., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-132">October 5, Monday</span></span> | <span data-ttu-id="f56c2-133">Október 4., vasárnap</span><span class="sxs-lookup"><span data-stu-id="f56c2-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="f56c2-134">Október 19., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-134">October 19, Monday</span></span> | <span data-ttu-id="f56c2-135">Október 18., vasárnap</span><span class="sxs-lookup"><span data-stu-id="f56c2-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="f56c2-136">November 2., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-136">November 2, Monday</span></span> | <span data-ttu-id="f56c2-137">November 1., vasárnap</span><span class="sxs-lookup"><span data-stu-id="f56c2-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="f56c2-138">November 16., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-138">November 16, Monday</span></span> | <span data-ttu-id="f56c2-139">November 15., vasárnap</span><span class="sxs-lookup"><span data-stu-id="f56c2-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="f56c2-140">Felmerült kiadások</span><span class="sxs-lookup"><span data-stu-id="f56c2-140">Expenses incurred</span></span> | <span data-ttu-id="f56c2-141">Október 5., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-141">October 5, Monday</span></span> | <span data-ttu-id="f56c2-142">Október 4., vasárnap</span><span class="sxs-lookup"><span data-stu-id="f56c2-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="f56c2-143">November 2., hétfő</span><span class="sxs-lookup"><span data-stu-id="f56c2-143">November 2, Monday</span></span> | <span data-ttu-id="f56c2-144">November 1., vasárnap</span><span class="sxs-lookup"><span data-stu-id="f56c2-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="f56c2-145">Ebben a példában, amikor az automatikus számlázás fut:</span><span class="sxs-lookup"><span data-stu-id="f56c2-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="f56c2-146">**Október 4. vagy bármely korábbi időpont** : Nem jön létre számla a szerződéshez, mert az egyes szerződéssorok **Számlázási ütemezés** táblázata nem hívja meg a számla futási dátumaként az október 4., vasárnap dátumot.</span><span class="sxs-lookup"><span data-stu-id="f56c2-146">**October 4 or any date before** : No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="f56c2-147">**Október 5., hétfő** : Egy számla a következőhöz jön létre:</span><span class="sxs-lookup"><span data-stu-id="f56c2-147">**October 5 Monday** : One invoice is generated for:</span></span>

    - <span data-ttu-id="f56c2-148">A mérföldkövet tartalmazó számító prototípus-mű, ha a **Számlázásra kész** értékkel van megjelölve.</span><span class="sxs-lookup"><span data-stu-id="f56c2-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="f56c2-149">A bevezetési munkák közé tartozik az összes Időtranzakció, amelyet a tranzakció zárási dátuma előtt hoztak létre. október 4., vasárnap előtt, ennek értéke **Számlázásra kész**.</span><span class="sxs-lookup"><span data-stu-id="f56c2-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="f56c2-150">A felmerült költségek közé tartozik az összes költségtranzakció, amelyet a tranzakció zárási dátuma előtt hoztak létre. október 4., vasárnap előtt, ennek értéke **Számlázásra kész**.</span><span class="sxs-lookup"><span data-stu-id="f56c2-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="f56c2-151">**Október 6. vagy bármely október 19. előtti időpont** : Nem jön létre számla a szerződéshez, mert az egyes szerződéssorok **Számlázási ütemezés** táblázata nem hívja meg a számla futási dátumaként október 6. és október 19 közötti dátumot.</span><span class="sxs-lookup"><span data-stu-id="f56c2-151">**On October 6 or any date before October 19** : No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="f56c2-152">**Október 19,. hétfő** Egy számla lesz generálva a bevezetési munkákhoz ami az összes Időtranzakciót tartalmazza, amelyet a tranzakció zárási dátuma előtt hoztak létre. október 18., vasárnap előtt, ennek értéke **Számlázásra kész**.</span><span class="sxs-lookup"><span data-stu-id="f56c2-152">**October 19, Monday** : One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="f56c2-153">**November 2., hétfő** : Egy számla a következőhöz jön létre:</span><span class="sxs-lookup"><span data-stu-id="f56c2-153">**November 2 Monday** : One invoice is generated for:</span></span>

    - <span data-ttu-id="f56c2-154">A bevezetési munkák közé tartozik az összes Időtranzakció, amelyet a tranzakció zárási dátuma előtt hoztak létre. November 1., vasárnap előtt, ennek értéke **Számlázásra kész**.</span><span class="sxs-lookup"><span data-stu-id="f56c2-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="f56c2-155">A felmerült költségek közé tartozik az összes költségtranzakció, amelyet a tranzakció zárási dátuma előtt hoztak létre. november 1., vasárnap előtt, ennek értéke **Számlázásra kész**.</span><span class="sxs-lookup"><span data-stu-id="f56c2-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="f56c2-156">**November 3., kedd** : Egy számla jön létre a prototípus munkára, amely tartalmazza a 12000 USD értékű mérföldkövet, ha meg van jelölve, **Számlázásra kész** értékkel.</span><span class="sxs-lookup"><span data-stu-id="f56c2-156">**November 3, Tuesday** : One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="f56c2-157">Automatikus számlázás konfigurálása</span><span class="sxs-lookup"><span data-stu-id="f56c2-157">Configure automatic invoicing</span></span>

<span data-ttu-id="f56c2-158">Automatikus számlafuttatás a következő lépések elvégzésével állítható be.</span><span class="sxs-lookup"><span data-stu-id="f56c2-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="f56c2-159">A **Project Operations** alatt nyissa meg a **Beállítások** > **Ismétlődő számla beállítása** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="f56c2-159">In **Project Operations** , go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="f56c2-160">Hozzon létre egy kötegelt feladatot, és adja neki a **Project operations számlák létrehozása** nevet.</span><span class="sxs-lookup"><span data-stu-id="f56c2-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="f56c2-161">A kötegelt feladat nevének tartalmaznia kell a „számlák létrehozása” szavakat.</span><span class="sxs-lookup"><span data-stu-id="f56c2-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="f56c2-162">A **Feladat típusa** mezőben válassza a **Nincs** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="f56c2-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="f56c2-163">Alapértelmezés szerint a **Napi gyakoriság** és az **Aktív** mezők értéke **Igen**.</span><span class="sxs-lookup"><span data-stu-id="f56c2-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="f56c2-164">Válassza a **Munkamenet futtatása** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="f56c2-164">Select **Run Workflow**.</span></span> <span data-ttu-id="f56c2-165">A **Rekord keresése** párbeszédpanelen három munkafolyamatot láthat:</span><span class="sxs-lookup"><span data-stu-id="f56c2-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="f56c2-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="f56c2-166">ProcessRunCaller</span></span>
- <span data-ttu-id="f56c2-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="f56c2-167">ProcessRunner</span></span>
- <span data-ttu-id="f56c2-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="f56c2-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="f56c2-169">Válassza a **ProcessRunCaller** elemet, majd a **Hozzáadás** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="f56c2-169">Select **ProcessRunCaller** , and then select **Add**.</span></span>
6. <span data-ttu-id="f56c2-170">A következő párbeszédpanelen válassza az **OK** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="f56c2-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="f56c2-171">Az **Alvás** munkafolyamatot egy **Folyamat** munkafolyamat követi.</span><span class="sxs-lookup"><span data-stu-id="f56c2-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="f56c2-172">Az 5. lépésben a **ProcessRunner** lehetőséget is választhatja.</span><span class="sxs-lookup"><span data-stu-id="f56c2-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="f56c2-173">Ezt követően, ha az **OK** lehetőséget választja, a **Folyamat** munkafolyamatot egy **Alvás** munkafolyamat követi.</span><span class="sxs-lookup"><span data-stu-id="f56c2-173">Then, when you select **OK** , a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="f56c2-174">A **ProcessRunCaller** és a **ProcessRunner** munkafolyamatok számlákat hoznak létre.</span><span class="sxs-lookup"><span data-stu-id="f56c2-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="f56c2-175">**A ProcessRunCaller** munkafolyamat meghívja a **ProcessRunner** munkafolyamatot.</span><span class="sxs-lookup"><span data-stu-id="f56c2-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="f56c2-176">A **ProcessRunner** az a munkafolyamat, amely ténylegesen létrehozza a számlákat.</span><span class="sxs-lookup"><span data-stu-id="f56c2-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="f56c2-177">A munkafolyamat végighalad az összes szerződési soron, amelyhez számlákat kell létrehozni, és számlákat hoz létre ezekre a sorokhoz.</span><span class="sxs-lookup"><span data-stu-id="f56c2-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="f56c2-178">Azon szerződési sorok meghatározásához, amelyekhez számlákat kell létrehozni, a feladat megvizsgálja a szerződési sorok számlafuttatási dátumait.</span><span class="sxs-lookup"><span data-stu-id="f56c2-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="f56c2-179">Ha az adott szerződéshez tartozó szerződési sorok egyazon számlafuttatási dátummal rendelkeznek, a tranzakciók egyetlen számlába kerülnek egyesítésre, amely két számlasorral fog rendelkezni.</span><span class="sxs-lookup"><span data-stu-id="f56c2-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="f56c2-180">Ha nincsenek tranzakciók a számlák létrehozására, akkor a feladat kihagyja a számla létrehozását.</span><span class="sxs-lookup"><span data-stu-id="f56c2-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="f56c2-181">Miután a **ProcessRunner** munkafolyamat futtatása befejeződött, meghívja a **ProcessRunCaller** munkafolyamatot, megadja a befejezési időt, és bezáródik.</span><span class="sxs-lookup"><span data-stu-id="f56c2-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller** , provides the end time, and is closed.</span></span> <span data-ttu-id="f56c2-182">A **ProcessRunCaller** ezután elindít egy időzítőt, amely a megadott befejezési időtől kezdve 24 órán át működik.</span><span class="sxs-lookup"><span data-stu-id="f56c2-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="f56c2-183">Az időzítő végén a **ProcessRunCaller** bezáródik.</span><span class="sxs-lookup"><span data-stu-id="f56c2-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="f56c2-184">A számlák létrehozására szolgáló kötegelt folyamat feladat ismétlődő feladat.</span><span class="sxs-lookup"><span data-stu-id="f56c2-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="f56c2-185">Ha ezt a kötegelt folyamatot többször futtatja, akkor a feladatból több példány jön létre, és hibákat okoz.</span><span class="sxs-lookup"><span data-stu-id="f56c2-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="f56c2-186">Ezért a kötegelt folyamatot csak egyszer kell elindítania, és csak akkor kell újraindítania, ha az leáll.</span><span class="sxs-lookup"><span data-stu-id="f56c2-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="f56c2-187">A kötegelt számlázás a Project Operations alkalmazásban csak a számlázási ütemezések szerint konfigurált projektek szerződéssoraihoz fut.</span><span class="sxs-lookup"><span data-stu-id="f56c2-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="f56c2-188">A rögzített árú számlázási móddal rendelkező szerződéssornál a mérföldkövek konfigurálása szükséges.</span><span class="sxs-lookup"><span data-stu-id="f56c2-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="f56c2-189">Az idő-és anyagelszámolású számlázási móddal rendelkező projekt-szerződéssorok esetében el kell végezni a dátum alapú számlázási ütemezés beállítását.</span><span class="sxs-lookup"><span data-stu-id="f56c2-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>
